<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MakeMyFuture • Anmeldung & Start</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

  <!-- Haupt-Skript (unten im <body>) -->
  <script defer src="script.js"></script>
</head>
<body>

  <!-- ================= Auth-Bereich ================= -->
  <div id="authContainer" class="container">
    <img src="logo.png" alt="Logo" class="logo" />
    <h1>MakeMyFuture</h1>
    <p class="slogan">Oops, I got a Job!</p>

    <!-- Registrierung -->
    <div id="registerSection">
      <h2>Registrierung</h2>
      <input type="text" id="name" placeholder="Name" required />
      <input type="email" id="registerEmail" placeholder="E-Mail" required />
      <input type="password" id="registerPassword" placeholder="Passwort" required />
      <button id="registerBtn">Jetzt registrieren</button>
    </div>

    <hr />

    <!-- Login -->
    <div id="loginSection">
      <h2>Login</h2>
      <input type="email" id="email" placeholder="E-Mail" required />
      <input type="password" id="password" placeholder="Passwort" required />
      <button id="loginBtn">Login</button>
    </div>

    <!-- Snackbar / Meldungen -->
    <p id="message"></p>
    <div id="snackbar"></div>
  </div>

  <!-- ================= Startseite (wird nach Login angezeigt) ================= -->
  <div id="startContainer" class="container hidden">
    <!-- Logo -->
    <img src="logo.png" alt="MakeMyFuture Logo" class="logo" />
    <!-- Firmenname -->
    <h1 class="headline">MakeMyFuture</h1>

    <button id="logoutBtn" style="margin-top:30px;">Abmelden</button>
  </div>

  <!-- Kurzes Inline-Skript nur fürs Umschalten -->
  <script>
    // Supabase-Instanz (gleich wie in script.js)
    const SUPABASE_URL  = 'https://vedcigedhjkarkcbqvtf.supabase.co';
    const SUPABASE_KEY  = 'dein_anon_key';
    const sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const authContainer   = document.getElementById('authContainer');
    const startContainer  = document.getElementById('startContainer');
    const logoutBtn       = document.getElementById('logoutBtn');

    // Beim Laden: Session prüfen
    sb.auth.getSession().then(({ data }) => {
      if (data.session) showStart();
    });

    // Logout-Handler
    logoutBtn.addEventListener('click', async () => {
      await sb.auth.signOut();
      showAuth();
    });

    // Helfer
    function showStart() {
      authContainer.classList.add('hidden');
      startContainer.classList.remove('hidden');
    }
    function showAuth() {
      authContainer.classList.remove('hidden');
      startContainer.classList.add('hidden');
    }
  </script>
</body>
</html>
